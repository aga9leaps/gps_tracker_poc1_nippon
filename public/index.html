<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Nippon Paint India - Vehicle Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#E31E24">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- JavaScript dependencies -->
    <script src="js/browser-detection.js" defer></script>
    <script src="js/pwa-installer.js" defer></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  </head>
  <body>
    <div id="header">
      <img id="logo" src="/images/Nippon-Taglines_Nippon-Paint-250x71.jpg" alt="Nippon Paint India">
    </div>

    <div class="container">
      <h1>Vehicle Location Tracker</h1>
      
      <div class="pwa-notice">
        <h3 style="margin-top: 0; color: var(--nippon-blue);">ðŸ’¡ Installation Tip</h3>
        <p>For better tracking performance, install this app on your home screen:</p>
        <ul style="padding-left: 20px;">
          <li>For Android: Tap the "Install App" button below or use your browser's menu</li>
          <li>For iPhone: Tap the share icon and select "Add to Home Screen"</li>
        </ul>
        <p>Installing the app will improve tracking reliability when the phone screen is off.</p>
      </div>
      
      <div id="location-permission" style="display: none;">
        <div class="permission-box">
          <h3>Location Access Required</h3>
          <p>This app needs access to your location to track this vehicle. Please allow location access when prompted.</p>
          <p class="ios-note">On iOS: You may need to enable location services in your device settings:</p>
          <ol class="ios-instructions">
            <li>Open Settings</li>
            <li>Go to Privacy & Security</li>
            <li>Select Location Services</li>
            <li>Enable Location Services</li>
            <li>Find this website in the list and select "Allow"</li>
          </ol>
          <div class="permission-buttons">
            <button onclick="locationServices.approveLocation()" class="primary-button">Continue</button>
            <button onclick="locationServices.denyLocation()" class="secondary-button">Cancel</button>
          </div>
        </div>
      </div>

      <div class="input-group">
        <label for="vehicleId">Vehicle ID</label>
        <input type="text" id="vehicleId" placeholder="Enter vehicle ID">
      </div>

      <button onclick="tracking.startTracking()" id="trackingButton">Start Tracking</button>

      <div id="status"></div>

      <div class="tracking-info" id="trackingInfo">
        <h3>Tracking Status</h3>
        <p>Vehicle ID: <span id="currentId"></span></p>
        <p>Last Update: <span id="lastUpdate">Never</span></p>
        <p>Location: <span id="locationInfo">Waiting for GPS...</span></p>
      </div>
    </div>

    <div id="map"></div>
    <div id="tracking-status"></div>

    <!-- Application JavaScript modules -->
    <script src="js/diagnostics.js"></script>
    <script src="js/map-controller.js"></script>
    <script src="js/location-services.js"></script>
    <script src="js/ui-controller.js"></script>
    <script src="js/tracking.js"></script>
  </body>
</html>